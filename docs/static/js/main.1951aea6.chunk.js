(this["webpackJsonpais-outage-web"]=this["webpackJsonpais-outage-web"]||[]).push([[0],{38:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),s=(n(38),n(10)),i=n.n(s),l=n(15),u=n(26),d=n(27),j=n(33),g=n(32),h=n(29),f=n.n(h),p=n(30),m=n(64),v=n(66),b=n(65),y=n(31),O=n.n(y),x=n(4),_=n.n(x),S=(n(59),{2016:{2:"2016_02.geojson",3:"2016_03.geojson",4:"2016_04.geojson",5:"2016_05.geojson",6:"2016_06.geojson",7:"2016_07.geojson",8:"2016_08.geojson",9:"2016_09.geojson",10:"2016_10.geojson",11:"2016_11.geojson",12:"2016_12.geojson"},2017:{1:"2017_01.geojson",2:"2017_02.geojson",3:"2017_03.geojson",4:"2017_04.geojson",5:"2017_05.geojson",6:"2017_06.geojson",7:"2017_07.geojson",8:"2017_08.geojson"}}),k=n(1),I=_()("2016-02-01 00:00:00"),M=_()("2017-08-31 23:59:59"),w="https://vdesgrange.github.io/ais-outage-web",C=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={error:!1,selectedInterval:[I,M],temporarySelectedInterval:[I,M],data:[]},e.fileLoader=function(){var t=Object(l.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.filter((function(e){return e})).map((function(e){return f.a.get("".concat(w,"/data/").concat(e)).then((function(t){return{date:e,collect:t.data}}))})));case 2:a=t.sent,e.setState({data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fileSearch=function(e,t){for(var n=e.year(),a=t.year(),r=e.month()+1,o=t.month()+1,c="",s=[],i=n;i<=a;i++)for(var l=i===a?o:12,u=i===n?r:1;u<=l;u++)c=S[i.toString()][u.toString()],s.push(c);return s},e.errorHandler=function(t){var n=t.error;return e.setState({error:n})},e.onChangeCallback=function(t){e.setState({temporarySelectedInterval:t}),e.debouncedSelectedInterval(t)},e.debouncedSelectedInterval=Object(p.debounce)((function(t){e.setState({selectedInterval:t})}),500),e.formatTick=function(e){return _()(e).format("MMM 'YY")},e.getFeatureStyle=function(e){var t=e.properties.type;return{weight:3,opacity:1,color:["#00A19D","#FFB344","#E05D5D"][t],dashArray:[void 0,void 0,5][t]}},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var n=this.state.selectedInterval;if(t.selectedInterval!==this.state.selectedInterval){var a=_()(n[0]),r=_()(n[1]),o=this.fileSearch(a,r);this.fileLoader(o)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.selectedInterval,r=t.temporarySelectedInterval;return console.log(this.state),Object(k.jsxs)("div",{className:"ais-wrapper",children:[Object(k.jsxs)(m.a,{id:"mapid",center:[52.377956,4.89707],zoom:10,scrollWheelZoom:!0,children:[Object(k.jsx)(v.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(k.jsx)(v.a,{url:"https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png"}),n&&n.length&&n.map((function(t){return Object(k.jsx)(b.a,{data:t.collect,style:e.getFeatureStyle,eventHandlers:{click:function(){console.log(this)}}},"date-".concat(t.date))}))]}),Object(k.jsxs)("div",{className:"time-range-section",children:[Object(k.jsxs)("div",{className:"time-range-details",children:[Object(k.jsxs)("div",{className:"from",children:[Object(k.jsx)("b",{children:"From"})," ",_()(a[0]).format("D MMMM 'YY HH:mm")]}),Object(k.jsxs)("div",{className:"to",children:[Object(k.jsx)("b",{children:"To"})," ",_()(a[1]).format("D MMMM 'YY HH:mm")]})]}),Object(k.jsx)(O.a,{containerClassName:"time-container",timelineInterval:[I,M],selectedInterval:r,onUpdateCallback:this.errorHandler,onChangeCallback:this.onChangeCallback,formatTick:this.formatTick,ticksNumber:24})]})]})}}]),n}(r.a.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(C,{})}),document.getElementById("root")),F()}},[[61,1,2]]]);
//# sourceMappingURL=main.1951aea6.chunk.js.map